# Cloudflare Pages Configuration
# SecurityTools - Gestionale Corsi Sicurezza D.Lgs. 81/08
# Versione: 1.0.0 - Gennaio 2026

name = "securitytools"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Pages configuration
pages_build_output_dir = "dist"

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "securitytools-db"
database_id = "YOUR_D1_DATABASE_ID" # Da sostituire dopo creazione

# KV Namespace per sessioni e cache
[[kv_namespaces]]
binding = "SESSIONS"
id = "YOUR_KV_NAMESPACE_ID" # Da sostituire dopo creazione

[[kv_namespaces]]
binding = "SUBSCRIPTIONS"
id = "YOUR_SUBSCRIPTIONS_KV_ID" # Da sostituire dopo creazione

# R2 Storage per file uploads (opzionale)
# [[r2_buckets]]
# binding = "STORAGE"
# bucket_name = "securitytools-files"

# Environment variables (secrets vanno configurati via CLI)
[vars]
ENVIRONMENT = "production"
APP_NAME = "SecurityTools"
APP_VERSION = "1.0.0"

# Production environment (supportato da Pages)
[env.production]
name = "securitytools-prod"
[env.production.vars]
ENVIRONMENT = "production"

# Preview environment (supportato da Pages)
[env.preview]
name = "securitytools-preview"
[env.preview.vars]
ENVIRONMENT = "preview"

# Rate limiting (richiede piano a pagamento)
# [[unsafe.bindings]]
# name = "RATE_LIMITER"
# type = "ratelimit"
# namespace_id = 1
# simple = { limit = 100, period = 60 }
